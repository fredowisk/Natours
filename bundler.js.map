{
  "mappings": "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",
  "sources": [
    "public/js/index.js",
    "public/js/mapbox.js",
    "public/js/login.js",
    "public/js/alerts.js",
    "public/js/updateSettings.js",
    "public/js/stripe.js",
    "public/js/signUp.js"
  ],
  "sourcesContent": [
    "/* eslint-disable*/\nimport '@babel/polyfill';\nimport { displayMap } from './mapbox';\nimport { login, logout } from './login';\nimport { updateUserData, updateUserPassword } from './updateSettings';\nimport { bookTour } from './stripe';\nimport { showAlert } from './alerts';\nimport { createAccount } from './signUp';\n\n//DOM ELEMENTS\nconst mapBox = document.getElementById('map');\nconst loginForm = document.querySelector('.form--login');\nconst signUpForm = document.querySelector('.form--sign-up');\nconst logoutButton = document.querySelector('.nav__el--logout');\nconst updateUserForm = document.querySelector('.form-user-data');\nconst updatePasswordForm = document.querySelector('.form-user-settings');\nconst bookButton = document.getElementById('book-tour');\n\n//Delegation\nif (mapBox) {\n  const locations = JSON.parse(mapBox.dataset.locations);\n  displayMap(locations);\n}\n\nif (loginForm) {\n  const input = document.getElementsByTagName('input')[1];\n\n  const icon = document.getElementById('password-icon');\n\n  icon.addEventListener('click', () => {\n    if (input.type === 'password') {\n      input.type = 'text';\n      icon.firstChild.attributes[0].nodeValue = '/img/icons.svg#icon-eye-off';\n    } else {\n      input.type = 'password';\n      icon.firstChild.attributes[0].nodeValue = '/img/icons.svg#icon-eye';\n    }\n  });\n\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\nif (signUpForm) {\n  const name = document.getElementById('name');\n  const email = document.getElementById('email');\n  const password = document.getElementById('password');\n  const passwordConfirmation = document.getElementById('passwordConfirmation');\n\n  const icon = document.querySelectorAll('#password-icon');\n\n  icon[0].addEventListener('click', () => {\n    if (password.type === 'password') {\n      password.type = 'text';\n      icon[0].firstChild.attributes[0].nodeValue =\n        '/img/icons.svg#icon-eye-off';\n    } else {\n      password.type = 'password';\n      icon[0].firstChild.attributes[0].nodeValue = '/img/icons.svg#icon-eye';\n    }\n  });\n\n  icon[1].addEventListener('click', () => {\n    if (passwordConfirmation.type === 'password') {\n      passwordConfirmation.type = 'text';\n      icon[1].firstChild.attributes[0].nodeValue =\n        '/img/icons.svg#icon-eye-off';\n    } else {\n      passwordConfirmation.type = 'password';\n      icon[1].firstChild.attributes[0].nodeValue = '/img/icons.svg#icon-eye';\n    }\n  });\n\n  signUpForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    createAccount(\n      name.value,\n      email.value,\n      password.value,\n      passwordConfirmation.value\n    );\n  });\n}\n\nif (logoutButton) logoutButton.addEventListener('click', logout);\n\nif (updateUserForm)\n  updateUserForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    const photo = document.getElementById('photo').files[0];\n\n    const form = new FormData();\n    form.append('name', name);\n    form.append('email', email);\n\n    form.append('photo', photo);\n\n    updateUserData(form);\n  });\n\nif (updatePasswordForm)\n  updatePasswordForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const submitButton = document.querySelector('.btn--save-password');\n\n    submitButton.textContent = 'Updating...';\n\n    const oldPassword = document.getElementById('password-current');\n    const newPassword = document.getElementById('password');\n    const newPasswordConfirmation = document.getElementById('password-confirm');\n    await updateUserPassword(\n      oldPassword.value,\n      newPassword.value,\n      newPasswordConfirmation.value\n    );\n\n    oldPassword.value = '';\n    newPassword.value = '';\n    newPasswordConfirmation.value = '';\n    submitButton.textContent = 'Save password';\n  });\n\nif (bookButton) {\n  bookButton.addEventListener('click', async (e) => {\n    e.target.textContent = 'Processing...';\n    ;\n    const { tourId } = e.target.dataset;\n    await bookTour(tourId);\n  });\n}\n\nconst alertMessage = document.querySelector('body').dataset.alert;\nif (alertMessage) {\n  showAlert('success', alertMessage, 10);\n}\n",
    "/* eslint-disable */\r\n\r\nexport const displayMap = locations => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoiZnJlZG93aXNrIiwiYSI6ImNrdjhuOHZvejAyOWoyeG5vanlkZGxxNXgifQ.mES_ZhZPY6QDTYyBOpJANQ';\r\n\r\n  const [lat, lng] = locations[0].coordinates;\r\n\r\n  var map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/fredowisk/ckv8r3mv58bbk14piycgv6uhj',\r\n    zoom: 1,\r\n    scrollZoom: false\r\n  });\r\n\r\n  const newButton = document.getElementById('zoom');\r\n\r\n  newButton.addEventListener('click', () => {\r\n    locations.forEach(location => {\r\n      const el = document.createElement('div');\r\n      el.className = 'marker';\r\n\r\n      new mapboxgl.Marker({\r\n        element: el,\r\n        anchor: 'bottom'\r\n      })\r\n        .setLngLat(location.coordinates)\r\n        .addTo(map);\r\n\r\n      new mapboxgl.Popup({\r\n        offset: 30\r\n      })\r\n        .setLngLat(location.coordinates)\r\n        .setHTML(`<p>Day ${location.day}: ${location.description}</p>`)\r\n        .addTo(map);\r\n    });\r\n\r\n    map.flyTo({\r\n      center: [lat, lng],\r\n      zoom: 6,\r\n      bearing: 0,\r\n      speed: 1, // make the flying slow\r\n      easing: t => t,\r\n      essential: true,\r\n      padding: {\r\n        top: 400,\r\n        bottom: 200,\r\n        left: 100,\r\n        right: 100\r\n      }\r\n    });\r\n\r\n    newButton.style.display = 'none';\r\n  });\r\n};\r\n",
    "/* eslint-disable*/\r\n\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const result = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password\r\n      }\r\n    });\r\n\r\n    if (result.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        // eslint-disable-next-line no-restricted-globals\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'get',\r\n      url: '/api/v1/users/logout'\r\n    });\r\n\r\n    //the reload code is super important, because it will reload all the cache\r\n    //and not simply reload the page\r\n    if (res.data.status === 'success') location.reload(true);\r\n  } catch (error) {\r\n    showAlert('error', 'Error loggint out! Try again.');\r\n  }\r\n};\r\n",
    "/*eslint-disable*/\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\n//type is 'success' or 'error'\r\nexport const showAlert = (type, message, time = 7) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${message}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n\r\n  window.setTimeout(hideAlert, time * 1000);\r\n};\r\n",
    "/* eslint-disable */\r\n\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\n// Update Data\r\nexport const updateUserData = async data => {\r\n  try {\r\n    const result = await axios({\r\n      method: 'PATCH',\r\n      url: '/api/v1/users/updateMe',\r\n      data\r\n    });\r\n\r\n    if (result.data.status === 'success') {\r\n      showAlert('success', 'Account updated successfully!');\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\n\r\nexport const updateUserPassword = async (\r\n  oldPassword,\r\n  newPassword,\r\n  newPasswordConfirmation\r\n) => {\r\n  try {\r\n    const result = await axios({\r\n      method: 'PATCH',\r\n      url: '/api/v1/users/updatePassword',\r\n      data: {\r\n        oldPassword,\r\n        newPassword,\r\n        newPasswordConfirmation\r\n      }\r\n    });\r\n\r\n    if (result.data.status === 'success') {\r\n      showAlert('success', 'Password updated successfully!');\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\n",
    "/*eslint-disable*/\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\nconst stripe = Stripe(\n  'pk_test_51Ju4syCxZBGB882laYkpbTlJpD80i5TElbw2A83xJMZAX1hvr5kMoS0fOoGtwtdzK5jj4w3NUoIc3NSOZmbmNaAm00qLIxFEcB'\n);\n\nexport const bookTour = async (tourId) => {\n  try {\n    //Get the checkout session from the server(API)\n    const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\n\n    //Create checkout form + charge credit card\n    await stripe.redirectToCheckout({\n      sessionId: session.data.session.id,\n    });\n  } catch (error) {\n    showAlert('error', error);\n  }\n};\n",
    "/* eslint-disable*/\r\n\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nexport const createAccount = async (\r\n  name,\r\n  email,\r\n  password,\r\n  passwordConfirmation\r\n) => {\r\n  try {\r\n    const result = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/signup',\r\n      data: {\r\n        name,\r\n        email,\r\n        password,\r\n        passwordConfirmation\r\n      }\r\n    });\r\n\r\n    if (result.data.status === 'success') {\r\n      showAlert('success', 'Account successfully created! \\n Please confirm your e-mail.');\r\n      window.setTimeout(() => {\r\n        // eslint-disable-next-line no-restricted-globals\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\n"
  ],
  "names": [],
  "version": 3,
  "file": "bundler.js.map",
  "sourceRoot": "/"
}
